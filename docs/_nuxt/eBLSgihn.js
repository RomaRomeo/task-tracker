import{m as T,n as w,o as p,c as y,a as s,t as x,p as V,u as l,q as N,F as D,s as C,v as S,x as F,r as h,f as U,y as v,z as _,A as I,B as H,d as O,C as L,D as P,b as q,_ as R}from"./C1WQFYCV.js";const $={HIGH:"high",MEDIUM:"medium",LOW:"low"},z={class:"p-4 border-b border-gray-200"},G={class:"text-lg font-semibold text-gray-800"},W={class:"text-gray-600 mt-1"},J={class:"p-4 flex justify-between items-center"},K={title:"Assignee ID",class:"text-blue-500 font-semibold"},Y=T({__name:"TaskCard",props:{task:{}},emits:["edit"],setup(e,{emit:r}){const o=e,m=r,n=w(()=>`${{[$.HIGH]:"bg-red-500 text-white",[$.MEDIUM]:"bg-yellow-500 text-white",[$.LOW]:"bg-green-500 text-white"}[o.task.priority]||"bg-gray-300 text-black"} px-2 py-1 rounded-full text-xs`),k=()=>m("edit",o.task),f=i=>{var u,a;const t=(u=o.task.id)==null?void 0:u.toString();t?(a=i.dataTransfer)==null||a.setData("taskId",t):console.error("Task ID is missing.")};return(i,t)=>(p(),y("div",{class:"bg-white shadow-lg rounded-lg overflow-hidden transform transition-transform duration-300 hover:scale-105",draggable:!0,onDragstart:f,onClick:k},[s("div",z,[s("h3",G,x(i.task.title),1),s("p",W,x(i.task.description),1)]),s("div",J,[s("span",{class:V(l(n))},x(i.task.priority),3),s("span",K,"User #: "+x(i.task.assignees),1)])],32))}});function j(e){return{id:e.id,title:e.todo,description:"",assignees:Number(e.userId),status:e.completed?"done":"todo",priority:"medium"}}const B=N("task",{state:()=>({tasks:[]}),actions:{async addTask(e){try{if(!e.assignees)throw new Error("User ID is required to create a task.");const r=await fetch("https://dummyjson.com/todos/add",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({todo:e.title,completed:e.status==="done",userId:e.assignees})});if(!r.ok)throw new Error(`HTTP error! Status: ${r.status}`);const o=await r.json();console.log("Task added from server:",o);const m=j(o);this.tasks.push({id:m.id,...e})}catch(r){console.error("Failed to add task:",r),alert("Failed to add task, incorrect assignees id!")}},updateTask(e){const r=this.tasks.findIndex(o=>o.id===e.id);r!==-1?(this.tasks[r]=e,console.log(`Task with ID ${e.id} updated successfully.`)):console.warn(`Task with ID ${e.id} not found.`)},getTaskById(e){return this.tasks.find(r=>r.id===e)},tasksByStatus(e){return this.tasks.filter(r=>r.status===e)},setTasks(e){this.tasks=e,console.log("Tasks have been set:",e)},async fetchTasks(){try{const e=await fetch("https://dummyjson.com/todos?limit=5");if(!e.ok)throw new Error(`Failed to fetch tasks: ${e.statusText}`);const o=(await e.json()).todos.map(j);this.setTasks(o),console.log("Fetched tasks successfully:",o)}catch(e){console.error("Failed to fetch tasks:",e)}}}}),Q={class:"text-xl font-semibold mb-4"},X={class:"space-y-4"},Z=T({__name:"Column",props:{item:{},filteredTasks:{}},emits:["editTask"],setup(e,{emit:r}){const o=e,m=r,n=B(),k=w(()=>o.filteredTasks.filter(t=>t.status===o.item)),f=t=>m("editTask",t),i=t=>{var a;const u=(a=t.dataTransfer)==null?void 0:a.getData("taskId");if(u){const b=n.getTaskById(Number(u));b&&(b.status=o.item,n.updateTask(b))}};return(t,u)=>{const a=Y;return p(),y("div",{class:"flex flex-col w-80 p-4 bg-gray-100 rounded-lg shadow-lg transition-transform duration-300 hover:shadow-xl",onDragover:u[0]||(u[0]=F(()=>{},["prevent"])),onDrop:i},[s("h2",Q,x(t.item),1),s("div",X,[(p(!0),y(D,null,C(l(k),b=>(p(),S(a,{key:b.id,task:b,onEdit:f},null,8,["task"]))),128))])],32)}}}),ss={class:"fixed inset-0 flex items-center justify-center bg-gray-800 bg-opacity-70"},ts={class:"bg-white p-6 rounded-lg shadow-lg w-full max-w-md transform transition-transform duration-300 ease-in-out hover:scale-105"},es={class:"text-xl font-semibold mb-4"},os={class:"mb-4"},rs={class:"mb-4"},ns={class:"mb-4"},as={class:"mb-4"},is={class:"mb-4"},ls=T({__name:"TaskForm",props:{task:{}},emits:["close","save"],setup(e,{emit:r}){const o=e,m=r,n=h({id:void 0,title:"",description:"",assignees:void 0,status:"todo",priority:"low"}),k=()=>m("save",n.value),f=()=>m("close");return U(()=>o.task,i=>{n.value=i?{...i}:{title:"",description:"",assignees:void 0,status:"todo",priority:"low"}},{immediate:!0}),(i,t)=>{var u;return p(),y("div",ss,[s("div",ts,[s("h2",es,x((u=i.task)!=null&&u.id?"Edit Task":"Add Task"),1),s("form",{onSubmit:F(k,["prevent"])},[s("div",os,[t[5]||(t[5]=s("label",{for:"title",class:"block text-gray-700 text-sm font-medium"},"Title",-1)),v(s("input",{id:"title","onUpdate:modelValue":t[0]||(t[0]=a=>l(n).title=a),type:"text",class:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 px-3 py-2",placeholder:"Enter task title",required:""},null,512),[[_,l(n).title]])]),s("div",rs,[t[6]||(t[6]=s("label",{for:"description",class:"block text-gray-700 text-sm font-medium"},"Description",-1)),v(s("textarea",{id:"description","onUpdate:modelValue":t[1]||(t[1]=a=>l(n).description=a),class:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 px-3 py-2",rows:"3",placeholder:"Enter task description"},null,512),[[_,l(n).description]])]),s("div",ns,[t[7]||(t[7]=s("label",{for:"assignee",class:"block text-gray-700 text-sm font-medium"},"Assignee (User ID)",-1)),v(s("input",{id:"assignee","onUpdate:modelValue":t[2]||(t[2]=a=>l(n).assignees=a),type:"number",class:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 px-3 py-2",placeholder:"Enter assignee number"},null,512),[[_,l(n).assignees]])]),s("div",as,[t[9]||(t[9]=s("label",{for:"status",class:"block text-gray-700 text-sm font-medium"},"Status",-1)),v(s("select",{id:"status","onUpdate:modelValue":t[3]||(t[3]=a=>l(n).status=a),class:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 px-3 py-2"},t[8]||(t[8]=[s("option",{value:"todo"},"TODO",-1),s("option",{value:"progress"},"In progress",-1),s("option",{value:"done"},"Done",-1)]),512),[[I,l(n).status]])]),s("div",is,[t[11]||(t[11]=s("label",{for:"priority",class:"block text-gray-700 text-sm font-medium"},"Priority",-1)),v(s("select",{id:"priority","onUpdate:modelValue":t[4]||(t[4]=a=>l(n).priority=a),class:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 px-3 py-2"},t[10]||(t[10]=[s("option",{value:"high"},"High",-1),s("option",{value:"medium"},"Medium",-1),s("option",{value:"low"},"Low",-1)]),512),[[I,l(n).priority]])]),s("div",{class:"flex justify-end gap-3"},[s("button",{type:"button",onClick:f,class:"bg-gray-500 text-white px-4 py-2 rounded-md hover:bg-gray-600 transition duration-300"}," Cancel "),t[12]||(t[12]=s("button",{type:"submit",class:"bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 transition duration-300"}," Save ",-1))])],32)])])}}}),ds={class:"flex flex-col p-6 bg-white rounded-lg shadow-xl"},us={class:"flex items-center justify-between space-x-4"},cs={class:"flex items-center space-x-2"},ms={class:"relative"},ps=["value"],fs={class:"flex overflow-x-auto gap-8 mt-8"},bs=T({__name:"TaskDashboard",setup(e){const r=["todo","progress","done"],o=h(!1),m=h(null),n=h("all"),k=h([]),f=B(),i=w(()=>f.tasks),t=w(()=>Array.from(new Set(i.value.map(c=>Number(c.assignees)).filter(Boolean)))),u=c=>c==="all"?i.value:i.value.filter(d=>Number(d.assignees)===c),a=c=>{m.value=c,o.value=!0},b=()=>o.value=!1,E=c=>{c.id?f.updateTask(c):f.addTask(c),b()};return U([i,n],([c,d])=>{k.value=u(d)},{deep:!0,immediate:!0}),H(()=>f.fetchTasks()),(c,d)=>{const M=Z,A=ls;return p(),y("div",ds,[s("div",us,[s("button",{onClick:d[0]||(d[0]=g=>a(null)),class:"flex items-center justify-center bg-blue-500 text-white text-base font-medium rounded-lg shadow-md hover:bg-blue-600 transition transform hover:scale-105 px-6 py-3"},d[2]||(d[2]=[s("svg",{class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),O(" Add Task ")])),s("div",cs,[d[5]||(d[5]=s("span",{class:"text-gray-800 text-base font-medium"},"Filter by Assignee:",-1)),s("div",ms,[v(s("select",{id:"user-select","onUpdate:modelValue":d[1]||(d[1]=g=>L(n)?n.value=g:null),class:"block w-40 bg-white border border-gray-300 rounded-md shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-base px-3 py-2 appearance-none"},[d[3]||(d[3]=s("option",{value:"all"},"All Users",-1)),(p(!0),y(D,null,C(l(t),g=>(p(),y("option",{key:g,value:g},x(g),9,ps))),128))],512),[[I,l(n)]]),d[4]||(d[4]=s("div",{class:"absolute inset-y-0 right-0 flex items-center pointer-events-none pr-2"},[s("svg",{class:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})])],-1))])])]),s("div",fs,[(p(),y(D,null,C(r,g=>q(M,{key:g,item:g,"filtered-tasks":l(k),onEditTask:a},null,8,["item","filtered-tasks"])),64))]),l(o)?(p(),S(A,{key:0,task:l(m),onClose:b,onSave:E,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center"},null,8,["task"])):P("",!0)])}}}),gs={};function ks(e,r){const o=bs;return p(),S(o)}const xs=R(gs,[["render",ks]]);export{xs as default};
